<h1 id="contents"><a href="#contents"><strong>Contents</strong></a></h1>
<ol style="list-style-type: decimal">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#history">History</a></li>
<ol style="list-style-type: decimal">
<li><a href="#version-0.2">Version 0.2</a>
<ol style="list-style-type: decimal">
<li><a href="#new-features">New features</a></li>
<li><a href="#modifications-of-existing-features">Modifications of existing features</a></li>
<li><a href="#bug-fixes">Bug fixes</a></li>
</ol></li>
</ol></li>
<li><a href="#description">Description</a></li>
<ol style="list-style-type: decimal">
<li><a href="#file-selection">File Selection</a></li>
<li><a href="#textbox">Textbox</a></li>
<li><a href="#active-files">Active Files</a></li>
<li><a href="#atom-chain-and-residue-selection">Atom, Chain and Residue selection</a>
<ol style="list-style-type: decimal">
<li><a href="#atom-type-selection">Atom type selection</a></li>
<li><a href="#chain-selection">Chain selection</a></li>
<li><a href="#residue-selection">Residue selection</a></li>
</ol></li>
<li><a href="#task-selection">Task selection</a>
<ol style="list-style-type: decimal">
<li><a href="#fitting">Fitting</a></li>
<li><a href="#rmsd-matrix">RMSD matrix</a></li>
<li><a href="#dihedral-pca">Dihedral PCA</a></li>
<li><a href="#cartesian-pca">Cartesian PCA</a></li>
<li><a href="#covariance-average-and-representative-structures">Covariance, average and representative structures</a></li>
<li><a href="#secondary-structure">Secondary structure</a></li>
<li><a href="#fraction-of-native-contacts">Fraction of native contacts</a></li>
<li><a href="#distance-maps">Distance maps</a></li>
<li><a href="#solute-entropy-calculation">Solute entropy calculation</a></li>
<li><a href="#extract-pdb">Extract PDB</a></li>
<li><a href="#surface-area">Surface area</a></li>
<li><a href="#radius-of-gyration-distances-bending-angles-and-torsion-angles-general">Radius of gyration, distances, bending angles and torsion angles</a></li>
<li><a href="#phipsi-dihedral-angles">phi/psi dihedral angles</a></li>
</ol></li>
<li><a href="#results">Results</a></li>
</ol></li>
<li><a href="#version">Version</a></li>
<li><a href="#author">Author</a></li>
</ol>
<h1 id="introduction"><a href="#introduction">Introduction</a></h1>
<p>It is recommended that newcomers to <strong>carma</strong>, first read carma's <a href="http://utopia.duth.gr/~glykos/carma.html">documentation</a>.</p>
<h1 id="history"><a href="#history">History</a></h1>
<h2 id="version-0.2"><a href="#version-0.2">Version 0.2</a></h2>
<h3 id="new-features"><a href="#new-features">New Features</a></h3>
<ol style="list-style-type: decimal">
<li><strong>grcarma</strong> can be launched with a directory path as a single argument. This directory should ideally be a directory created during a previous grcarma run or at the very least include the linked PSF/DCD files from that run. The directory can be specified through the command line ( <code>grcarma /path/to/dir</code> ) or the graphical interface.</li>
<li><strong>grcarma</strong> now supports 5 dimensional clustering in addition to the standard 3 dimensional clustering performed by <a href="http://utopia.duth.gr/~glykos/Carma.html"><strong>carma</strong></a>. This is performed through the external program <a href="https://github.com/athbaltzis/cluster5D"><strong>cluster5D</strong></a>. The cluster5D executable needs to be in the PATH in order for the 5 dimensional clustering analysis to be enabled.</li>
<li>Good-Turing convergence analysis is now available for linux/macOSX. This is performed through the external program <a href="https://github.com/pkoukos/GoodTuringMD"><strong>GoodTuringMD</strong></a>. The source code of the program is included in the grcarma source code, so the user only needs to install the <a href="http://www.r-project.org/"><strong>R statistical package</strong></a> and some required modules.</li>
</ol>
<h3 id="modifications-of-existing-features"><a href="#modifications-of-existing-features">Modifications of existing features</a></h3>
<ol style="list-style-type: decimal">
<li>The width of the cluster plot has been changed so that it takes advantage of the entire horizontal resolution of the screen.</li>
<li>The 'RMSD matrix' analysis window now includes a preview of the size of the matrix to be created( in megabytes and matrix dimensions ).</li>
<li>The checks about the file/directory permissions are now more extensive.</li>
<li>The native structure in the 'Fraction of native contacts' analysis can now be defined with a PDF file.</li>
</ol>
<h3 id="bug-fixes"><a href="#bug-fixes">Bug fixes</a></h3>
<ol style="list-style-type: decimal">
<li>Running <strong>grcarma</strong> with 'carma.fitted.dcd' now produces a warning instead of overwriting the original DCD file. This happens because 'carma.fitted.dcd' is a filename reserved by <strong>carma</strong> for internal use.</li>
<li>Fixed a plot that manifested when viewing a cluster plot after performing both a dPCA and a cPCA analysis.</li>
<li>Atom selection during dPCA analysis with the 'chi1' flag now uses the correct atom types.</li>
<li>Various minor bug fixes.</li>
</ol>
<h1 id="description"><a href="#description">Description</a></h1>
<p>The documentation of grcarma is intended to be more of a tutorial to the program and it's most commonly used features rather than a Unix style manual, listing the various flags and possible parameters(the main reason for that being that grcarma does not accept any flags/parameters). In this section the main features of the program will be described, based on the order they appear in the program's main window. However, before the main window is created the files to be used must be specified.</p>
<h2 id="file-selection"><a href="#file-selection">File selection</a></h2>
<p>Despite the fact that grcarma does not accept any flags, it can still be run from the command line with or without arguments. Two forms of arguments are accepted :</p>
<ol style="list-style-type: decimal">
<li>The first is a PSF/DCD pair. If the program detects that you have specified only a PSF and not a DCD file, or vice versa, a file that is neither a .psf or a .dcd, or a non matching pair it will terminate with an error message printed to the terminal.</li>
<li>The second is a path to a directory. This can be an absolute or relative path. The directory itself should contain the linked PSF/DCD files from a previous grcarma run, otherwise the program will terminate with a relevant error message.</li>
</ol>
<p>If the program is run without any files/directories as arguments, a window will pop up prompting the user to select a PSF/DCD pair or a directory, through a graphical interface. In case of non matching files the program will display an error message in a new window and then terminate. Alternatively, the program can be launched by running the executable, or a shortcut pointing to it, through the window manager. Upon successful file selection the main window of the program will come into view. If a directory has been specified the 'View Results' window will be available immediately.</p>
<h2 id="textbox"><a href="#textbox">Textbox</a></h2>
<p>The status of the latest analysis is reported in the textbox in colored text. Successful reports are colored green, error reports are colored red, status reports are colored cyan and quick reports of the results of some analyses are colored white. The success reports prompt the user to use a relevant submenu to view the results, and error reports prompt the user to view the latest output of carma, which is stored in a file named <strong>last_carma_run.log</strong> located in the results subfolder. The results subfolder is a folder named <strong>carma_results_DAY.MONTH.YEAR_HOUR.MIN.SEC</strong> which is created every time the user initiates an analysis and is used for all the subsequent analyses, until the program is terminated. It is located in the folder in which the DCD file is located.</p>
<h2 id="active-files"><a href="#active-files">Active files</a></h2>
<p>The lower part of the program's main window is taken up by two labels indicating the currently active PSF and DCD files. Should the user decide to perform an analysis with the PSF/DCD files originally specified, a click on the <em>'Go back to original psf/dcd'</em> button, will result in abandoning the currently active PSF/DCD pair and using the original ones.</p>
<h2 id="atom-chain-and-residue-selection"><a href="#atom-chain-and-residue-selection">Atom, Chain and residue selection</a></h2>
<p>An atom, chain and residue selection can be specified for most of the analyses that can be performed with grcarma. The buttons that allow the user to perform these selections are included in the upper part of every task window.</p>
<h3 id="atom-type-selection"><a href="#atom-type-selection">Atom type selection</a></h3>
<p>The first menu from the top can be used to specify the selection of atoms for which the desired analysis should be performed :</p>
<ul>
<li><strong>CA</strong> Analysis will be performed only for the CA atoms. This is the default for most tasks.</li>
<li><strong>ALLID</strong> Analysis will be performed for all the atoms.</li>
<li><strong>HEAVY</strong> Analysis will be performed for all the non-hydrogen atoms.</li>
<li><strong>Backbone</strong> Analysis will be performed on <strong>'CA' 'C' 'N' and 'O'</strong> atoms.</li>
<li><strong>Custom</strong> Analysis will be performed on the atoms that will be specified by the user.</li>
</ul>
<h3 id="chain-selection"><a href="#chain-selection">Chain selection</a></h3>
<p>The second is used for specifying a chain. There are no defaults in this menu as the various checkbuttons will be populated according to the number of chain identifierss read from the .psf file. A usual PSF would contain a chain that will be titled A or another letter, several water molecules and perhaps some ions. This will result in the creation of 3 checkbuttons in this sub-menu, each named after the chain id they represent.</p>
<h3 id="residue-selection"><a href="#residue-selection">Residue selection</a></h3>
<p>The last sub-menu can be used to select atoms based on their residue number. The sub-menu consists of two radiobuttons titled <strong>'All'</strong> and <strong>'Change'</strong>. By default the active is the first one. This means that only the atoms specified through the atom type and chain sub-menus are included in the analysis. When the change radiobutton is activated a new window is created prompting the user to specify the span ( for example 45 - 234 ) for which residues will be selected, for a particular chain identifier ( eg 'A' ). In case more than one selection of residues is required, an additional selection can be specified by clicking the <strong>'Add'</strong> button which creates a bar identical to the first one.</p>
<p><em>Users should take note that the selections should be ascending. This means that if the required residues belong in two groups, 50-100 and 150-300, the first selection should be specified in the first bar, and the second in the one that is created through the 'Add' button.</em></p>
<p>Upon submission of the selection a new PSF file is created containing the atoms selected, and is made the active PSF ( the PSF file to be used in all subsequent analyses ). This can be reversed by clicking on the 'All' radiobutton.</p>
<h2 id="task-selection"><a href="#task-selection">Task selection</a></h2>
<p>The left side of the main window contains the buttons of the various tasks that can be performed :</p>
<h3 id="fitting"><a href="#fitting">Fitting</a></h3>
<ol style="list-style-type: decimal">
<li><p>The first of these analyses makes use of the <code>-fit</code> flag. In this mode global rotations-translations are removed through least-squares fitting of every frame onto the first, or the one specified in the <em>Use frame as ref</em> box, creating a new DCD file named carma.fittedN.dcd, where N is the number of fittings that have been performed and thusly the number of fitted DCD files that have been created. Upon completion of the process the user will be prompted to answer whether the newly created DCD file is going to be used in other analyses. If the answer is <em>yes</em> the fitted DCD is rendered the active DCD, otherwise no change is made. The file <strong>rms_from_frame_N.dat</strong> that is created in the process contains the rms deviations of each structure versus the reference structure, and can be plotted through the <strong>'View Results'</strong> menu.</p></li>
<li><p>The second analysis makes use of the flag <code>-fit</code> along with the flag <code>-index</code>. In this mode the fitting is only performed for a subset of the atoms specified through atom type selection and chain selection, but the resulting DCD contains all the frames determined by those parameters. This mode can be enabled by clicking on the <em>Use a subset of the residues for the fitting</em>. The window is split in two parts for this analysis. The upper part is identical to the window of the fitting analysis. This part determines the atoms that will be written out to the fitted .dcd, and the lower part the atoms that will be used for the fitting.</p></li>
</ol>
<h3 id="rmsd-matrix"><a href="#rmsd-matrix">RMSD matrix</a></h3>
<p>This analysis makes use of the <code>-cross</code> flag. The matrix which is produced contains the rms deviations (using CA atoms only) between all possible pairs of structures from the trajectory of the DCD file. The matrix is then colored via the command <code>carma -color - &lt; carma.RMSD.matrix</code> which results in the creation of a colored postscript representation of the matrix titled <strong>RMSD_matrix.DCD_NAME.ps</strong>. The successful completion of the command results in a status message being posted to the text-box. The postscipt file is available for viewing through the 'View Results' Button located at the bottom of the left side buttons.</p>
<p>If the R statistical package is installed the 'Determine convergence using Good-Turing statistics' checkbutton will be enabled, otherwise it will be greyed out. If this button is active the Good-Turing convergence analysis will be performed on the RMSD matrix. For more details about what sort of results you can obtain using this procedure, take a look at the github <a href="https://github.com/pkoukos/GoodTuringMD">page</a> of the program.</p>
<h3 id="dihedral-pca"><a href="#dihedral-pca">Dihedral PCA</a></h3>
<p>This analysis makes use of the <code>-dpca</code> flag. Note that at least one segment identifier must be specified in order to perform this analysis, and that atom type selection has no meaning in this analysis. The primary result of this analysis is the creation of a number of postscript files ( default 3 ) displaying the free energy landscapes on the principal component planes defined by the eigenvector pairs 1-2, 1-3 and 2-3.</p>
<p>By activating the checkbutton titled <em>'Automatically isolate max ... clusters'</em> and specifying a number, a cluster analysis will be performed based on the file <strong>dPCA.clusters.dat</strong>. In case the user has specified more clusters than the ones contained in the file, the maximum number of clusters will be extracted. The flag used for this analysis is <code>-v -w -col -cov -dot -norm -super</code> and it results in the creation of three .pdb files for each cluster</p>
<ol style="list-style-type: decimal">
<li><p>The first is <strong>average.cluster_N.pdb</strong> N being the number of the cluster this .pdb file represents. In this file the average structure of the frames contained in the Nth cluster is presented.</p></li>
<li><p>The second is <strong>superposition.cluster_N.pdb</strong> and contains superpositions of the frames of the Nth cluster.</p></li>
<li><p>The third is <strong>representative.cluster_N.pdb</strong> and contains the natural structure with the smallest deviation from the average.</p></li>
</ol>
<p>If the program <strong>cluster5D</strong> is included in the PATH, the 'Perform five dimensional clustering' checkbutton will be enabled. If it is activated then in addition to the 3 dimensional clustering procedure performed by <strong>carma</strong> a 5 dimensional clustering procedure will be performed by cluster5D. The files produced by cluster5D can be distinguished from the ones produced by carma by their '5-D' prefix. For more info on the cluster5D program and it's parameters take a look at it's github <a href="https://github.com/athbaltzis/cluster5D">page</a>.</p>
<h3 id="cartesian-pca"><a href="#cartesian-pca">Cartesian PCA</a></h3>
<p>This analysis makes use of the flag <code>-proj</code>. Most of the above apply to the cPCA as well, except for the fact that atom type selections are meaningful for this analysis and that chain selection is not required.</p>
<h3 id="covariance-average-and-representative-structures"><a href="#covariance-average-and-representative-structures">Covariance, average and representative structures</a></h3>
<p>This analysis makes use of the <code>-cov</code> and <code>-super</code> flags. After the analysis is complete and provided that it is successful the file <strong>carma.rms-average,dat</strong> is read in order to determine which dcd frame contains the natural structure that is closest to the average.</p>
<h3 id="secondary-structure"><a href="#secondary-structure">Secondary structure</a></h3>
<p><em>This analysis is available only for linux/macosx platforms.</em></p>
<p>This analysis makes use of the flags <code>-stride</code> and <code>-pbd</code>. If the VMD program <em>stride</em> is found in the path then this task is enabled and <em>stride</em> is used to perform secondary structure analysis.</p>
<h3 id="fraction-of-native-contacts"><a href="#fraction-of-native-contacts">Fraction of Native contacts</a></h3>
<p>This analysis makes use of the <code>-qfraction</code> flag. In this analysis the native contacts are calculated for residues whose distance ( in Angstrom ) is smaller than the number specified in <em>'Distance cutoff'</em> ( default is 8 ), and which are at least as many residues apart as the number specified in <em>'Residue separation'</em> ( default 2 ). The results are in a file named <strong>Qfraction.dcd_name.dat</strong> which can be plotted through the <strong>'View results'</strong> menu.</p>
<h3 id="distance-maps"><a href="#distance-maps">Distance maps</a></h3>
<p>This analysis makes use of the flag <code>-rms</code>. In this analysis two files of interest are produced: <strong>distance_map.average.dcd_name.ps</strong> and <strong>distance_map.RMSD.dcd_name.ps</strong>. The first contains a map of the average values of all specified atom distances for all frames contained in the .dcd file and the second the corresponding root-mean-square deviations from the aforementioned averages. These two .ps files are then merged along their diagonal and a new .ps file named <strong>distance_map.combined.dcd_name.ps</strong> is created.</p>
<h3 id="solute-entropy-calculation"><a href="#solute-entropy-calculation">Solute entropy calculation</a></h3>
<p>The only parameter required for this analysis is the temperature in which the simulation will be performed. In order to study the entropy of the molecule in a meaningful way the number of frames included in the analysis is increased by the number specified in the box <em>'Step'</em>. The default value is the number of frames contained in the .dcd header divided by 10. So if the .dcd file contained 2000000 frames and the analysis were to be run with the default values, the first run would be performed for the frames 1-200000, the second for the frames 1-400000 .. 1-2000000. Every time a run is completed successfully the entropy that was calculated by the program is reported in the textbox, and after all the runs have been completed the results are stored in the file <strong>entropy.dat</strong> that can be plotted through the <strong>'View Results'</strong> menu.</p>
<h3 id="extract-pdb"><a href="#extract-pdb">Extract PDB</a></h3>
<p>This analysis makes use of the flag <code>-pdb</code>. In this analysis a step is specified ( default .dcd frames / 10 ) and every step frames a .pdb file is written out. This .pdb file contains the structure corresponding to the particular frame.</p>
<h3 id="surface-area"><a href="#surface-area">Surface area</a></h3>
<p>Flag <code>-surface</code>. In this mode the program will calculate a metric related to the total surface area of the atoms selected, and write the results in a file named <strong>surface.dcd_name.dat</strong>, which can be plotted. A segid selection is required for this analysis.</p>
<h3 id="radius-of-gyration-distances-bending-angles-and-torsion-angles-general"><a href="#radius-of-gyration-distances-bending-angles-and-torsion-angles-general">Radius of gyration, Distances, Bending angles and torsion angles ( general )</a></h3>
<p>The flags for these analyses are <code>-rg</code>, <code>-dist</code>, <code>-bend</code> and <code>-tor</code> respectively. In these analyses a particular metric of the molecule or a part of it is calculated. Specifically:</p>
<ol style="list-style-type: decimal">
<li><p>In the radius of gyration analysis the mass-weighted radius of gyration of the selected atoms is calculated. At least one segid is required for this analysis. The results of this analysis are contained in the file <strong>Rgyration.dcd_name.dat</strong>.</p></li>
<li><p>In the distances analysis the program will calculate the distance of two atoms. The results are placed in a file named <strong>distances.dcd_name.dat</strong>.</p></li>
<li><p>In the bending angles analysis the bending angle between three specified atoms is calculated. The results are contained in the file <strong>bendangles.dcd_name.dat</strong>.</p></li>
<li><p>In the torsion angles analysis the torsion angles between four specified atoms are calculated, and the results are in the file <strong>torsions.dcd_name.dat</strong>.</p></li>
</ol>
<p>All of the result files of the above analyses can be plotted through the <strong>'View Results'</strong> menu.</p>
<h3 id="phipsi-dihedral-angles"><a href="#phipsi-dihedral-angles">phi/psi dihedral angles</a></h3>
<p>This task is a particular case of torsion angles calculation meaning that the torsion angles that will be calculated correspond to the phi/psi angles of the molecule and are suitable for viewing in a ramachandran plot.</p>
<h2 id="results"><a href="#results">Results</a></h2>
<p>The results of most of the analyses can be viewed through the <em>'View Results'</em> button in the bottom left corner of the main window. Initially the button is grayed out as no files have been produced. After the successful completion of an analysis the user is prompted to use this button to examine the results. Generally the results that can be examined through this menu belong to one of three categories.</p>
<ol style="list-style-type: decimal">
<li><p>The first is postscript files ending in .ps. These files are ( usually colored ) representations of a matrix produced by carma, or an external program such as weblogo. In order to examine these files a postscript viewer must be installed on the system.</p>
For Linux/MACOSX users a search of the environmental variables of the system is performed and if the variable <em>GRCARMA_PS_VIEWER</em> has been set to a program in the path, then that program is used as the postscript viewer, else a search of the path is performed for one of the following programs:
<ul>
<li>evince</li>
<li>gv</li>
<li>gs</li>
<li>display</li>
</ul>
<p>in that order, and if one of them is found it is used as the postscript viewer, and a status message is printed in the textbox consisting of <em>The program selected for .ps viewing is evince/gs/display</em>. If none of these executables is found, a relevant warning message is printed informing the user that postscript viewing has been disabled.</p>
<p>For Windows users no search of any folder is performed and no message is printed, due to the fact that windows uses file associations stored in the registry. However, if a program has been associated with the .ps extension then that program will automatically open the postscript file the user has selected through the graphical interface.</code></pre>
</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li><p>The second is ASCII formatted text files such as <strong>distances.dcd_name.dat</strong> or <strong>rms_from_average.dat</strong>. These files can be plotted and no external programs are used for viewing the plots. In order to reduce computation time and speed up the plotting process, if the number of frames included in the DCD header is greater than the width ( in pixels ) of the screen that the program is being displayed on, a sampling of the values in the various text files will be performed.</p></li>
<li><p>The last type of files that can be viewed through this menu are .pdb files. Similarly to the .ps files, an external program is required in order to view these files.</p>
For Linux/MACOSX users a search of the environmental variables of the system is performed and if the variable <em>GRCARMA_PDB_VIEWER</em> has been set to a program in the path, then that program is used as the pdb viewer, else a search of the path is performed for one of the following programs:
<ul>
<li>rasmol</li>
<li>jmol</li>
<li>pymol</li>
<li>vmd</li>
</ul>
<p>in that order, and if one of them is found it is used as the PDB viewer, and a status message is printed in the textbox consisting of <em>The program selected for PDB viewing is rasmol</em>. If none of these executables is found, a relevant warning message is printed informing the user that pdb file viewing has been disabled.</p>
<p>For Windows users no search of any folder is performed and no message is printed, due to the fact that windows uses file associations stored in the registry. However, if a program has been associated with the PDB extension then that program will automatically open the PDB file the user has selected through the graphical interface.</code></pre>
</li>
</ol>
<h1 id="version"><a href="#version">Version</a></h1>
<p>Version 0.2 Oct 2014</p>
<h1 id="author"><a href="#author">Author</a></h1>
<p>Panagiotis I. Koukos</p>
